## 1. 服务器中的数据库
&nbsp;&nbsp;  redis 服务器将所有的数据库都保存在服务器状态 redis/redisServer 结构的 db 数组中,db 数组的每一项都是 redis.h/redisDb 结构,每一个  redisDb 结构代表一个数据库:
```java
strust redisServer{
       // ....
       redisDB *db; // 一个数组,保存着服务器中所有的数据库

       int dbnum;   // 服务器的数据库数量,dbnum 属性的值由服务器的配置的 database 选项决定的, 默认会初始化 16 个数据库。
       //....
}
```

## 2. 切换数据库
&nbsp;&nbsp; 通过 SELECT 命令来切换数据库


## 3. 数据库键空间
&nbsp;&nbsp; redis 是一个键值对数据库服务器,服务器中每个数据库都由一个 redis.h/redisDb 结构表示,其中 redisDb 结构中的 dict 字典保存了数据库中的所有的键值对,称为键空间 。 键空间中的键对象对应的就是数据库中的键。

```java
strust  strust redisDB{
       // ....
         dict *dict ; // 数据库键空间,保存着数据库中所有的键值对
       //....
}
```

## 4. 添加新键   
```
 set msg "lidong"
```

## 5. 删除键   
```
 DEL msg 
```

## 6. 更新键   
&nbsp;&nbsp;  根据类型的不同更新方式不一样,这里写一种 。
```
 set msg "lidong"
```

## 7. 对键取值
&nbsp;&nbsp;  根据类型的不同获取方式不一样,这里写一种 。
```
 get msg 
```

## 8. 设置键的生存时间和过期时间
&nbsp;&nbsp;  设置过期时间的四种方式：
```java
      1.   expire <key> <ttl>  // 用于将键的 key 的生存时间设置成 ttl 秒
      2.   pexpire  <key> <ttl> //用于将键的 key 的生存时间设置成 ttl 毫秒
      3.   expireat  <key> <timestamp> //用于将键的 key 的过期时间设置为 timestamp 所指定的秒数时间戳
      4.   pexpireat <key> <timestamp> //用于将键的 key 的过期时间设置为 timestamp 所指定的毫秒数时间

```

## 9. 保存过期时间
&nbsp;&nbsp;  redisDb 结构的 expires 字典中保存了数据库中所有键的过期时间，称为过期字典。过期字典中的键是一个指针，这个指针指向的是键空间中某个键对象 。 过期字典中的值是一个 long 类型整数，保存的是过期时间。


## 10. 移除过期时间

```
    PERSIST <KEY>
```

## 11. 计算并返回剩余生命时间
&nbsp;&nbsp;  TTL   命令是以秒单位返回键的剩余时间     
&nbsp;&nbsp;  PTTL  命令是以毫秒为单位返回键的剩余时间

## 12. 过期键删除策略
&nbsp;&nbsp;  三种不同策略的 ：   
&nbsp;&nbsp;&nbsp;&nbsp; 1. 定时删除 :   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在设置键的时间的同时，创建一个定时器，让定时器在键过期时间来临时，立刻执行删除操作。  
&nbsp;&nbsp;&nbsp;&nbsp; 2. 定时删除 :     
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在设置键的时间的同时，创建一个定时器，让定时器在键过期时间来临时，立刻执行删除操作。

