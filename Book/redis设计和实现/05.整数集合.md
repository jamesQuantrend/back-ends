## 1. 简介：
&nbsp;&nbsp; 整数集合是集合键底层实现之一,当一个集合中只包含整数值元素,并且这个集合的值的元素不多时,redis 就会使用整数集合作为集合键的底层实现。

## 2. 整数集合的实现：
&nbsp;&nbsp; 整数集合是redis用于保存整数数值的集合抽象数据结构,他可以保存类型是 int16_t ,int32_t 或者 int64_t 整数值， 并保证集合中不会出现重复的元素。
&nbsp;&nbsp;  每个insert.h/insert 结构表示一个整数集合:
```java
typedefstruct insert {
    uin32_tencoding ; // 编码方式
    uin32_length ; // 集合包含的元素数量
    int8_contents[];// 保存元素的数组
}insert
```
&nbsp;&nbsp;  contents ：   
&nbsp;&nbsp;&nbsp;&nbsp;    数组是整数集合的底层实现: 整数集合中的每个元素都是  contents 中的一个数组项, 各个项在数组中按值的大小从小到大有序的排列,并且数组中不包含任何重复项。

&nbsp;&nbsp;  length  ：  
&nbsp;&nbsp;&nbsp;&nbsp;    length 属性记录了整数集合中包含元素的数量,就是 contents 长度。

&nbsp;&nbsp; 虽然 inset 结构将content 属性声明为 int8_t 类型 ,但是 contents 并不保存任何 int8_t 的值, contents 数组的真正的类型取决于 encoding 的属性的值。

| encoding的值     | 数组类型 | 最大最小值                                  |
| ---------------- | -------- | ------------------------------------------- |
| INSERT_ENC_INT16 | INT16_t  | -32768 至 32767                             |
| INSERT_ENC_INT32 | int32_t  | -2147483648 至 2147483647                   |
| INSERT_ENC_INT64 | int64_t  | -9223372036854775808 至 9223372036854775807 |

## 3. 升级:
&nbsp;&nbsp; 每当我们要将一个新元素添加到整数集合里面,并且新元素的类型要比现有的所有元素都要长时,整数集合先进行升级操作,然后才能将元素添加到新的集合中。

TODO:// 这个需要重新梳理

## 4. 升级好处 :
&nbsp;&nbsp;  提升整数集合的灵活性   
&nbsp;&nbsp;  节约内存

## 5. 灵活性 :
&nbsp;&nbsp; 通过自动类型 可以存储大小不同的整形值。

## 6. 节约内存 :
&nbsp;&nbsp; 让每一种类型在自己适合的位置上。

## 7. 降级 :
&nbsp;&nbsp; 不支持降级